- en: <!--yml
  prefs: []
  type: TYPE_NORMAL
- en: 'category: 未分类'
  prefs: []
  type: TYPE_NORMAL
- en: 'date: 2024-10-13 06:29:50'
  prefs: []
  type: TYPE_NORMAL
- en: -->
  prefs: []
  type: TYPE_NORMAL
- en: //indirect for a dependency in go.mod file in Go (Golang)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 来源：[https://golangbyexample.com/indirect-dependency-golang/](https://golangbyexample.com/indirect-dependency-golang/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Table of Contents
  prefs: []
  type: TYPE_NORMAL
- en: '**   [Overview](#Overview "Overview")'
  prefs: []
  type: TYPE_NORMAL
- en: '[Example](#Example "Example")*  *# **Overview**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As the name suggests **//indirect** against a dependency in the **go.mod** file
    indicates that the dependency is indirect. **go.mod** file only records the direct
    dependency. However, it may record an indirect dependency in the below cases
  prefs: []
  type: TYPE_NORMAL
- en: Any indirect dependency which is not listed in the **go.mod** file of your direct
    dependency or if direct dependency doesn’t have a **go.mod** file, then that dependency
    will be added to the go.mod file with **//indirect** as the suffix
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Any dependency which is not imported in any of the source files of the module.
    That dependency will be recorded as **//indirect** if the dependency has been
    added via go get.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Example**'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let’s understand both points above with example. For that let’s first create
    a module
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Now create a file **learn.go**
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Notice that we have specified the dependency in the **learn.go** as
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: So **github.com/gocolly/colly** is a direct dependency of the **learn** module
    as it is directly imported in the module. Let’s add colly version v1.2.0 as a
    dependency in the go.mod file
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Now let’s run the below command
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: After running this command let’s now let’s again examine the contents of **go.mod**
    file. Since colly version v1.2.0 doesn’t have a go.mod file , all dependencies
    required by colly will be added to the **go.mod** file with **//indirect** as
    suffix
  prefs: []
  type: TYPE_NORMAL
- en: Do a **cat go.mod**
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: All other dependencies are suffixed by **//indirect**. Also checksum of all
    direct and indirect dependencies will be recorded in the go.sum file.
  prefs: []
  type: TYPE_NORMAL
- en: We also mentioned that any dependency which is not imported in any of the source
    file will be marked as //indirect. To illustrate that delete the **learn.go**
    created above. Also clean up **go.mod** file to remove all require lines. Now
    run below command
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Now check the contents of **go.mod** file
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Notice that the dependency is recorded as **//indirect** as it is not imported
    in any of the source files. Now create uuid.go file as below which imports the
    **[github.com](http://github.com)/pborman/uuid** as dependency
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Now do a go build. After go build again check the contents of go.mod file. The
    **//indirect** will now be removed as the dependency is required in the source
    file of the module which is uuid.go
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '[go](https://golangbyexample.com/tag/go/)*   [golang](https://golangbyexample.com/tag/golang/)*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
